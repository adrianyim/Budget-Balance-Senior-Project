{% extends "base.html" %}

{% block title %}
Home
{% endblock %}

{% block header %}
<div class="mx-5">
    <label>Welcome {{user.first_name}}, </label>
<label><a href="/user/logout">Logout</a></label>
</div>
{% endblock %}

{% block content %}
<div class="row justify-content-md-center mx-5">
    <table style="text-align:center" class="table table-borderless">
        <form method="POST" action="insertItems">
            {% csrf_token %}
            {{item_form}}
            <tr><td></td><td><button type="submit" class="btn btn-outline-info btn-sm">Submit</button></td></tr>
        </form>
            <tr><td>Total income: $ {{income}}</td><td>Total expense: $ {{expense}}</td></tr>
            <tr><td colspan="2">How many days do you want to predict?</td></tr>
        <form action="/home/" method="POST">
            {% csrf_token %}
            {{day_form}}
            <tr><td></td><td><button type="submit" class="btn btn-warning btn-sm">Predict</button></td></tr>
        </form>
    </table>
    {% for message in messages %}{{message}}{% endfor %}
    {% autoescape off %}{{predict_list}}{% endautoescape %}
</div>
<div class="row justify-content-md-center mx-5 p-3 table-success">
    <table class="table-hover">
        <tr><th>Item</th><th>Item Type</th><th>Cost</th><th>Cost Type</th><th>Remark</th><th>Date</th></tr>
        {% for item in items %}
        <tr>
            <td>{{item.item}}</td>
            <td>{{item.item_type}}</td>
            <td>{{item.cost}}</td>
            <td>{{item.cost_type}}</td>
            <td>{{item.remark}}</td>
            <td>{{item.date}}</td>
            <td><a href="updateItems/{{item.id}}"><button type="button" class="btn btn-primary btn-sm">Update</button></a></td>
            <td><a href="deleteItems/{{item.id}}"><button type="button" class="btn btn-outline-danger btn-sm">Delete</button></a></td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}